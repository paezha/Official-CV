---
name: Antonio
surname: Páez
position: "Professor"
address: |
         | School of Earth, Environment and Society
         | McMaster University
         | 1280 Main St West, Hamilton, Ontario, Canada L8S 1S4
         | phone: +1 905 525 9140
www: experts.mcmaster.ca/display/paezha
email: "paezha@mcmaster.ca"
orcid: 0000-0001-6912-9919
github: paezha
publons: 2897251
#researchgate: 7004827878
googlescholar: paezha
date: "`r format(Sys.time(), '%B %Y')`"
output: 
  vitae::awesomecv:
    page_total: true
    extra_dependencies: ["flafter"]
header-includes:
  - \usepackage{soul}
  - \usepackage{longtable}
  - \usepackage{float}
---


```{r knitr-setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, 
                      warning = FALSE, 
                      message = FALSE,
                      fig.show='asis', 
                      out.width="0.6\\linewidth", 
                      fig.align='center')

#pandoc::pandoc_activate()
```

```{r load-packages}
library(bibliometrix) # Comprehensive Science Mapping Analysis
library(dplyr) # A Grammar of Data Manipulation
library(ggraph) # An Implementation of Grammar of Graphics for Graphs and Networks
library(ggplot2) # Create Elegant Data Visualisations Using the Grammar of Graphics
library(glue) # Interpreted String Literals # Interpreted String Literals
library(gt) # Easily Create Presentation-Ready Display Tables
library(here) # A Simpler Way to Find Your Files # A Simpler Way to Find Your Files
library(kableExtra) # Construct Complex Table with 'kable' and Pipe Syntax 
library(lubridate) # Make Dealing with Dates a Little Easier
library(readr) # Read Rectangular Text Data
library(rnaturalearth) # World Map Data from Natural Earth
library(rnaturalearthdata) # World Vector Map Data from Natural Earth Used in 'rnaturalearth'
library(scholar) # Analyse Citation Data from Google Scholar
library(sf) # Simple Features for R
library(stringr) # Simple, Consistent Wrappers for Common String Operations
library(tibble) # Simple Data Frames
library(tidygraph) # A Tidy API for Graph Manipulation
library(tidyr) # Tidy Messy Data
library(treemapify) # Draw Treemaps in 'ggplot2'
library(vitae) # Curriculum Vitae for R Markdown
```

```{r current-year}
# Retrieve current year
current_year <- lubridate::year(Sys.time()) # Update year
```

```{r google-scholar-id}
id <- "bLY377kAAAAJ" # Replace with your own google scholar id
```

# About this CV

This CV was created programmatically using the `R` statistical language, and it can be accessed in folder `02-rsc-cv` of this repository:

https://github.com/paezha/Official-CV/

# About Me

* I trained in civil engineering before being adopted into geography.
* My areas of interest include transportation, equity, justice, spatial analysis, spatial statistics, travel behavior, and cities.
* Also, too, mathematics, computer languages, science fiction, poetry, and history.
* A 2024 global bibliometric analysis by [Research.com](https://research.com/scientists-rankings/social-sciences-and-humanities/ca) of the most influential scholars in the social sciences and humanities (about 16,000 researchers) places me in the **top 3%** of scholars in the world. 
<!-- Ranked 1904 of 16,000 (12%), and the 16,000 are already in the top 2% of scholars according to the Stanford Science Wide Indicators--> 
* In 2024 I was recognized with the **Edward L. Ullman Award** of the Association of American Geographers for lifelong commitment and contributions to the field of transportation geography.
* In 2010 a research team I led was recognized with the **Meredith F. Burrill Award** of the Association of American Geographers for exceptional work at the intersection of policy and basic research in geography.


# Education

```{r education-details}
read_csv(paste0(here(),"/assets/education.csv")) |> 
  detailed_entries(what = Degree, 
                   when = Year, 
                   with = Institution,
                   where = Where, 
                   why = Thesis,
                   .protect = FALSE)
```

# Current Status at McMaster

Full Professor in the School of Earth, Environment and Society since 2014. Tenured since 2007.

# Employment History

## Academic

```{r employment-details}
read_csv(paste0(here(),"/assets/employment.csv")) |> 
  slice_head(n = 4) |>
  detailed_entries(what = Position, 
                   when = Year, 
                   with = Organization,
                   where = Where,
                   .protect = FALSE)
```

## Industry
<!--
Surveyor and construction site supervisor (August 1993 - March 1995) Topographical
survey projects in Nuevo León, Mexico, sponsored by various Municipal Public Works Departments (Monterrey, Guadalupe, Santa Catarina), and by Mercedes-Benz.
-->

Consultant (2015 - present) Environics Analytics, Toronto, Canada. 

# Honours

## Scientific Awards

```{r scientific-awards-details}
read_csv(paste0(here(),"/assets/honors.csv")) |>
  dplyr::filter(Type == "Scientific Awards") |> 
  arrange(desc(Year)) |>
  detailed_entries(what = Organization, 
                   when = Year, 
                   with = Honor,
                   where = Where,
                   why = With,
                   .protect = FALSE)
```

## Visiting Professorships

```{r professorship-details}
read_csv(paste0(here(),"/assets/honors.csv")) |>
  dplyr::filter(Type == "Professorship") |> 
  arrange(desc(Year)) |>
  detailed_entries(what = Honor, 
                   when = Year, 
                   with = Organization,
                   where = Where,
                   .protect = FALSE)
```

## Scholarships

```{r scholarships-details}
read_csv(paste0(here(),"/assets/honors.csv")) |>
  dplyr::filter(Type == "Scholarship") |>  
  arrange(desc(Year)) |>
  detailed_entries(what = Honor, 
                   when = Year, 
                   with = Organization,
                   where = Where,
                   .protect = FALSE)
```

## Trainee Honours

```{r trainee-honors-details}
read_csv(paste0(here(),"/assets/honors.csv")) |>
  dplyr::filter(Type == "Trainee") |> 
  detailed_entries(what = Organization, 
                   when = Year, 
                   with = With,
                   where = Honor,
                   .protect = FALSE)
```

# Editorial

## Editorships

```{r editor-details}
read_csv(paste0(here(),"/assets/editorial-board.csv")) |>
  filter(What == "Editor-in-Chief") |>
  detailed_entries(what = Journal, 
                   where = Year,
                   with = What,
                   .protect = FALSE)
```

```{r associate-editor-details}
read_csv(paste0(here(),"/assets/editorial-board.csv")) |>
  filter(What == "Associate Editor") |>
  detailed_entries(what = Journal, 
                   where = Year,
                   with = What,
                   .protect = FALSE)
```

## Guest Editorships

```{r guest-editor-details}
read_csv(paste0(here(),"/assets/editorial-board.csv")) |>
  filter(What == "Guest Editor") |>
  detailed_entries(what = Editors, 
                   when = Year,
                   with = What,
                   where = glue::glue("{Journal} {Volume}"),
                   why = Title,
                   .protect = FALSE)
```

## Editorial Boards

```{r editorial-board-details}
read_csv(paste0(here(),"/assets/editorial-board.csv")) |>
  filter(What == "Editorial Board Member") |>
  detailed_entries(what = Journal, 
                   where = Year,
                   with = What,
                   .protect = FALSE)
```

# Areas of Interest

Transportation; accessibility; equity; justice; spatial data analysis and statistics; transportation modeling; travel behavior; health geography; Geographic Information Systems.

# Research Funds

## Funds at a Glance

```{r research-funding}
research_funding <- read_csv(paste0(here(),"/assets/research-funding.csv")) |>
  mutate(Amount_num = str_replace_all(Amount, ",", ""),
         Amount_num = str_extract_all(Amount_num, "\\d+") |>
           as.numeric(),
         Share = Amount_num * Share,
         Share_chr = prettyNum(Share, big.mark =",", digits = 4),
         Share_chr = paste0("$", Share_chr))
```

The funding total of all projects that I have been part of is `r paste0("CAD ", prettyNum(sum(research_funding$Amount_num), big.mark = ",", digits = 4))`. The total in research grants from various organizations, including the Canadian Institutes of Health Research (CIHR), the Natural Sciences and Engineering Research Council of Canada (NSERC), and the Social Sciences and Humanities Research Council of Canada (SSHRC) is `r paste0("CAD ", prettyNum(sum(research_funding$Amount_num[research_funding$Purpose == "Research"]), big.mark = ",", digits = 4))`. I have also been the recipient of several grants to improve teaching practice, to the total of `r paste0("CAD ", prettyNum(sum(research_funding$Amount_num[research_funding$Purpose == "Teaching"]), big.mark = ",", digits = 4))`. And, I have received numerous travel grants, amounting to `r paste0("CAD ", prettyNum(sum(research_funding$Amount_num[research_funding$Purpose == "Travel"]), big.mark = ",", digits = 4))`.

My personal share of these funds to date amounts to `r paste0("CAD ", prettyNum(sum(research_funding$Share), big.mark = ",", digits = 4))`. The distribution of these funds for research, teaching, and travel, and from various organizations, can be seen in Fig. \ref{fig:research-funding-share}.

```{r research-funding-plot, out.width="0.7\\linewidth", fig.cap="\\label{fig:research-funding-share}My share of research funds by source"}
ggplot(research_funding, 
       aes(area = Share, 
           fill = Purpose,
           subgroup = Funder_Short,
           label = Share_chr)) +
  geom_treemap() +
  geom_treemap_subgroup_border() +
  geom_treemap_subgroup_text(place = "centre", grow = T, alpha = 0.25, 
                             colour =
                             "black", fontface = "italic", min.size = 0) +
  geom_treemap_text(colour = "white", place = "topleft", reflow = T) +
  scale_fill_manual(values = c("Research" = "deepskyblue", "Teaching" = "darkorange", "Travel" = "darkolivegreen3")) +
  theme(legend.position = "bottom")
```

## Detailed Funds

```{r research-funding-details}
read_csv(paste0(here(),"/assets/research-funding.csv")) |>
  arrange(desc(Year)) |>
  detailed_entries(what = Title, 
                   when = Year, 
                   where = Amount,
                   with = glue::glue("{Funder}, {Where}"),
                   why = glue::glue("PI: {PI}; team size: {Participants} researchers"),
                   .protect = FALSE)
```

# Research Impact

```{r summary-bibliography, include=FALSE}
books <- bibliography_entries(paste0(here(),"/assets/books.bib")) |>
  arrange(desc(issued), desc(author$family))

books_authors <- csl_name(books)
books_authors <- books_authors$family$author
books_authors <- books_authors$family
n_authors <- str_split(books_authors, ",") |>
           lapply(length) |>
           unlist()

summary_books <- books |>
  mutate(n_authors = n_authors,
         first_author = str_split_i(books_authors, ",", 1),
         second_author = str_split_i(books_authors, ",", 2),
         senior_author = str_split_i(books_authors, ",", -1),
         case_author = case_when(n_authors == 1 ~ "single",
                                 n_authors >= 2 & str_detect(second_author, "Páez") ~ "second",
                                 n_authors > 1 & str_detect(first_author, "Páez") ~ "first",
                                 n_authors > 2 & str_detect(senior_author, "Páez") ~ "senior",
                                 TRUE ~ "other")) |> select(ends_with("author")) |>
  summarize(type = "Books",
            total = n(),
            mean_authors = round(mean(n_authors), 2),
            max_authors = max(n_authors),
            single_author = glue(sum(case_author == "single"), " (", round(sum(case_author == "single")/n(), 2) * 100, "%)"),
            first_author = glue(sum(case_author == "first"), " (", round(sum(case_author == "first")/n(), 2) * 100, "%)"),
            second_author = glue(sum(case_author == "second"), " (", round(sum(case_author == "second")/n(), 2) * 100, "%)"),
            senior_author = glue(sum(case_author == "senior"), " (", round(sum(case_author == "senior")/n(), 2) * 100, "%)"),
            other_author = glue(sum(case_author == "other"), " (", round(sum(case_author == "other")/n(), 2) * 100, "%)"))

edited_books <- bibliography_entries(paste0(here(),"/assets/edited-books.bib")) |>
  #bibliography_entries(paste0(here(),"/assets/savedrecs_2.bib")) |>
  arrange(desc(issued), desc(author$family))


book_chapters <- bibliography_entries(paste0(here(),"/assets/book-chapters.bib")) |>
  #bibliography_entries(paste0(here(),"/assets/savedrecs_2.bib")) |>
  arrange(desc(issued), desc(author$family))

book_chapters_authors <- csl_name(book_chapters)
book_chapters_authors <- book_chapters_authors$family$author
book_chapters_authors <- book_chapters_authors$family
n_authors <- str_split(book_chapters_authors, ",") |>
           lapply(length) |>
           unlist()

summary_book_chapters <- book_chapters |>
  mutate(n_authors = n_authors,
         first_author = str_split_i(book_chapters_authors, ",", 1),
         second_author = str_split_i(book_chapters_authors, ",", 2),
         senior_author = str_split_i(book_chapters_authors, ",", -1),
         case_author = case_when(n_authors == 1 ~ "single",
                                 n_authors >= 2 & str_detect(second_author, "Páez") ~ "second",
                                 n_authors > 1 & str_detect(first_author, "Páez") ~ "first",
                                 n_authors > 2 & str_detect(senior_author, "Páez") ~ "senior",
                                 TRUE ~ "other")) |> select(ends_with("author")) |>
  summarize(type = "Book chapters",
            total = n(),
            mean_authors = round(mean(n_authors), 2),
            max_authors = max(n_authors),
            single_author = glue(sum(case_author == "single"), " (", round(sum(case_author == "single")/n(), 2) * 100, "%)"),
            first_author = glue(sum(case_author == "first"), " (", round(sum(case_author == "first")/n(), 2) * 100, "%)"),
            second_author = glue(sum(case_author == "second"), " (", round(sum(case_author == "second")/n() * 100, 2), "%)"),
            senior_author = glue(sum(case_author == "senior"), " (", round(sum(case_author == "senior")/n() * 100, 2), "%)"),
            other_author = glue(sum(case_author == "other"), " (", round(sum(case_author == "other")/n(), 2), "%)"))

peer_reviewed_articles <- bibliography_entries(paste0(here(),"/assets/refereed-publications.bib")) |>
  arrange(desc(issued), desc(author$family))

peer_reviewed_articles_authors <- csl_name(peer_reviewed_articles)
peer_reviewed_articles_authors <- peer_reviewed_articles_authors$family$author
peer_reviewed_articles_authors <- peer_reviewed_articles_authors$family

n_authors <- str_split(peer_reviewed_articles_authors, ",") |>
           lapply(length) |>
           unlist()

summary_peer_reviewed_articles <- peer_reviewed_articles |>
  cbind(n_authors) |>
  mutate(first_author = str_split_i(peer_reviewed_articles_authors, ",", 1),
         second_author = str_split_i(peer_reviewed_articles_authors, ",", 2),
         senior_author = str_split_i(peer_reviewed_articles_authors, ",", -1),
         case_author = case_when(n_authors == 1 ~ "single",
                                 n_authors >= 2 & str_detect(second_author, "Páez") ~ "second",
                                 n_authors > 1 & str_detect(first_author, "Páez") ~ "first",
                                 n_authors > 2 & str_detect(senior_author, "Páez") ~ "senior",
                                 TRUE ~ "other")) |> select(ends_with("author")) |>
  summarize(type = "Peer reviewed articles",
            total = n(),
            mean_authors = round(mean(n_authors), 2),
            max_authors = max(n_authors),
            single_author = glue(sum(case_author == "single"), " (", round(sum(case_author == "single")/n(), 2) * 100, "%)"),
            first_author = glue(sum(case_author == "first"), " (", round(sum(case_author == "first")/n(), 2) * 100, "%)"),
            second_author = glue(sum(case_author == "second"), " (", round(sum(case_author == "second")/n(), 2) * 100, "%)"),
            senior_author = glue(sum(case_author == "senior"), " (", round(sum(case_author == "senior")/n(), 2) * 100, "%)"),
            other_author = glue(sum(case_author == "other"), " (", round(sum(case_author == "other")/n(), 2) * 100, "%)"))

peer_reviewed_conference <- bibliography_entries(paste0(here(),"/assets/conference-presentations-peer-reviewed.bib")) |>
  arrange(desc(issued), desc(author$family))

peer_reviewed_conference_authors <- csl_name(peer_reviewed_conference)
peer_reviewed_conference_authors <- peer_reviewed_conference_authors$family$author
peer_reviewed_conference_authors <- peer_reviewed_conference_authors$family

n_authors <- str_split(peer_reviewed_conference_authors, ",") |>
           lapply(length) |>
           unlist()

summary_peer_reviewed_conference <- peer_reviewed_conference |>
  cbind(n_authors) |>
  mutate(first_author = str_split_i(peer_reviewed_conference_authors, ",", 1),
         second_author = str_split_i(peer_reviewed_conference_authors, ",", 2),
         senior_author = str_split_i(peer_reviewed_conference_authors, ",", -1),
         case_author = case_when(n_authors == 1 ~ "single",
                                 n_authors >= 2 & str_detect(second_author, "Páez") ~ "second",
                                 n_authors > 1 & str_detect(first_author, "Páez") ~ "first",
                                 n_authors > 2 & str_detect(senior_author, "Páez") ~ "senior",
                                 TRUE ~ "other")) |> select(ends_with("author")) |>
  summarize(type = "Peer reviewed conference presentations",
            total = n(),
            mean_authors = round(mean(n_authors), 2),
            max_authors = max(n_authors),
            single_author = glue(sum(case_author == "single"), " (", round(sum(case_author == "single")/n(), 2) * 100, "%)"),
            first_author = glue(sum(case_author == "first"), " (", round(sum(case_author == "first")/n(), 2) * 100, "%)"),
            second_author = glue(sum(case_author == "second"), " (", round(sum(case_author == "second")/n(), 2) * 100, "%)"),
            senior_author = glue(sum(case_author == "senior"), " (", round(sum(case_author == "senior")/n(), 2) * 100, "%)"),
            other_author = glue(sum(case_author == "other"), " (", round(sum(case_author == "other")/n(), 2) * 100, "%)"))

bibliography_glance <- rbind(summary_books,
                             summary_book_chapters,
                             summary_peer_reviewed_articles,
                             summary_peer_reviewed_conference)
```

```{r citations-by-category}
citation_categories <- read_delim(glue(here(), "/assets/wos_cited_fields_2024_09_17.txt")) |>
  transmute(Category = `Web of Science Categories`,
            Count = `Record Count`) |>
  mutate(super_category = case_when(str_detect(Category, "Transport") ~ "Transportation",
                                    str_detect(Category, "Environmental") ~ "Environmental Science/Studies",
                                    TRUE ~ Category)) |>
  group_by(super_category) |>
  summarize(Category = first(super_category),
            Count = sum(Count),
            .groups = "drop") |>
  arrange(desc(Count)) |>
  slice_head(n = 12)
```

```{r citations-by-country}
citation_countries <- read_delim(glue(here(), "/assets/wos_cited_countries_2024_09_17.txt")) |>
  transmute(Country = `Countries/Regions`,
            Count = `Record Count`) |>
  mutate(Country = str_to_title(Country),
         Country = case_when(str_detect(Country, "Peoples R China") ~ "China",
                             str_detect(Country, "Usa") ~ "United States",
                             TRUE ~ Country)) |>
  arrange(desc(Count)) |>
  slice_head(n = 12)
```
```{r citations-by-sdg}
citation_sdg <- read_delim(glue(here(), "/assets/wos_cited_sdg_2024_09_17.txt"),
                           delim = "\t") |>
  transmute(Goal = `Sustainable Development Goals`,
            Count = as.numeric(`Record Count`)) |>
  arrange(desc(Count)) |>
  slice_head(n = 11)
```

Fig. \ref{fig:citations} gives a summary of my research impact according to Google Scholar. As of `r lubridate::month(Sys.Date(), label = TRUE) |> as.character()`, `r lubridate::year(Sys.Date()) |> as.character()`, my research has been cited a total of `r prettyNum(get_profile(id)$total_cites, big.mark = ",")` times, and my h-index is `r as.character(get_profile(id)$h_index)`. The i10-index indicates that `r as.character(get_profile(id)$i10_index)`, or approximately `r paste0(round(100 * get_profile(id)$i10_index/sum(bibliography_glance$total)), "%")` of my publications have been cited ten times or more. 

The impact of my work can also be appreciated by the breadth of the fields in which it is cited. According to Web of Science (Fig. \ref{fig:citations-by-field}), my research is cited by scholars in numerous disciplines, notably in  `r citation_categories$super_category[1]`, `r citation_categories$super_category[2]`, `r citation_categories$super_category[3]`, `r citation_categories$super_category[4]`, and `r citation_categories$super_category[5]`. My publications have been cited by researchers in more than 100 countries; as seen in Fig. \ref{fig:citations-by-country}, most citations to my work are by researchers in the `r citation_countries$Country[1]`, `r citation_countries$Country[2]`, `r citation_countries$Country[3]`, `r citation_countries$Country[4]`, and `r citation_countries$Country[5]`.

Lastly, my work has contributed to inform research that aligns with the United Nations Sustainable Development Goals (see Fig. \ref{fig:citations-by-sdg}), particularly goals `r citation_sdg$Goal[1]`, `r citation_sdg$Goal[2]`, `r citation_sdg$Goal[3]`, `r citation_sdg$Goal[4]`, and `r citation_sdg$Goal[5]`.

Combined with the level of funding described above, the cost-effect of my research is approximately `r paste0("CAD ", prettyNum(sum(research_funding$Share)/bibliography_glance$total[3], big.mark = ",", digits = 2))` per peer-reviewed article (excluding book chapters, edited books, books, and conference presentations). To put this number in context, this is equivalent to `r paste0(prettyNum(sum(research_funding$Share)/bibliography_glance$total[3]/13271.94 * 100, big.mark = ",", digits = 2), "%")` of a one-year graduate research assistantship at my institution. In terms of impact, the cost-effect of my research is `r paste0("CAD ", prettyNum(sum(research_funding$Share)/get_profile(id)$total_cites, big.mark = ",", digits = 2))` per citation.

```{r citations-plot, fig.cap="\\label{fig:citations}Citations per year (data from Google Scholar)"}
citations_scholar <- scholar::get_citation_history(id)

citations_scholar |>
  ggplot() + 
  geom_col(aes(x = year, 
               y = cites),
           color = "black",
           fill = "white") + 
  annotate(geom = "text", 
           x = 2004, 
           y = 950, 
           hjust = 0,
           label = paste0("Total cites = ", 
                          prettyNum(get_profile(id)$total_cites, big.mark = ","))) +
  annotate(geom = "text", 
           x = 2004, 
           y = 900, 
           hjust = 0,
           label = paste0("h-index = ", 
                          as.character(get_profile(id)$h_index))) +
  annotate(geom = "text", 
           x = 2004, 
           y = 850, 
           hjust = 0,
           label = paste0("i10-index = ", 
                          as.character(get_profile(id)$i10_index))) +
  ggthemes::theme_tufte()
```

```{r citations-field, out.width="0.7\\linewidth", fig.cap="\\label{fig:citations-by-field}Citations by field (data from Web of Science)"}
citation_categories |>
  mutate(label = glue("{super_category} ({Count})")) |>
  ggplot(aes(area = Count, 
             fill = super_category,
             label = label)) +
  geom_treemap() +
  #geom_treemap_subgroup_border() +
  #geom_treemap_subgroup_text(place = "centre", grow = T, alpha = 0.25, 
  #                           colour =
  #                           "black", fontface = "italic", min.size = 0) +
  geom_treemap_text(colour = "black", 
                    place = "topleft",
                    padding.x = grid::unit(2, "mm"),
                    padding.y = grid::unit(2, "mm"), 
                    reflow = T) +
  scale_fill_brewer(palette = "Set3") +
  theme(legend.position = "none")
```

```{r citations-country, out.width="0.7\\linewidth", fig.cap="\\label{fig:citations-by-sdg}Citations by country (data from Web of Science)"}
citation_countries |>
  mutate(label = glue("{Country} ({Count})")) |>
  ggplot(aes(area = Count, 
             fill = Country,
             label = label)) +
  geom_treemap() +
  geom_treemap_text(colour = "black", 
                    place = "topleft",
                    padding.x = grid::unit(2, "mm"),
                    padding.y = grid::unit(2, "mm"), 
                    reflow = T) +
  scale_fill_brewer(palette = "Set3") +
  theme(legend.position = "none")

```

```{r citations-sdg, out.width="0.7\\linewidth", fig.cap="\\label{fig:citations-by-country}Citations by Sustainable Development Goal (data from Web of Science)"}
citation_sdg |>
  mutate(label = glue("{Goal} ({Count})")) |>
  ggplot(aes(area = Count, 
             fill = Goal,
             label = label)) +
  geom_treemap() +
  geom_treemap_text(colour = "black", 
                    place = "topleft",
                    padding.x = grid::unit(2, "mm"),
                    padding.y = grid::unit(2, "mm"), 
                    reflow = T) +
  scale_fill_brewer(palette = "Set3") +
  theme(legend.position = "none")
```

# Policy Impact

```{r policy-impact-preparation}
# Read policy impact file. This was sourced from Overton.io: check this file for instructions: POLICY_IMPACT_README.txt
policy_impact <- read_csv(paste0(here(),"/assets/policy-impact.csv"))

# Read policy impact file. This was sourced from Overton.io: check this file for instructions: POLICY_IMPACT_README.txt
policy_impact_topics <- read_csv(paste0(here(),"/assets/policy-impact-topics.csv"))

# Select topics
policy_impact_topics <- policy_impact_topics |> 
  rename(Subject_area = `Subject area`,
         Document_count = `Document count`,
         Reason_highlighted = `Reason highlighted`) |>
  filter(Subject_area == "All") |>
  filter(!Topic %in% c("Branches of science", "Data", "Research", "Statistics", "Regression analysis", "Dependent and independent variables", "Technology", "Information", "Geographic information system", "Computer network", "Spatial analysis", "International Transport Forum", "Time", "Errors and residuals", "World population", "Canada", "Correlation and dependence", "Database")) |>
  mutate(Topic = ifelse(str_detect(Topic, "Econom"), "Economy/Economics", Topic),
         Topic = ifelse(str_detect(Topic, "rapid transit") | str_detect(Topic, "Rapid transit"), "Bus/Rapid transit", Topic)) |>
  group_by(Topic, Reason_highlighted) |>
  summarize(Document_count = sum(Document_count),
            .groups = "drop")
  

# Load simple features object with world map
world <- ne_countries(scale = "medium", returnclass = "sf")

# Filter out Antarctica
world <- world |>
  filter(continent != "Antarctica")

# Retrieve the country centroids from world map
country_centroids <- world |>
  st_centroid() |>
  select(name, name_long, brk_name, formal_en)

policy_impact <- policy_impact |>
  rename(Source_country = `Source country`) |>
  # Fix names of countries
  mutate(Source_country = ifelse(Source_country == "USA",
                                 "United States of America", 
                                 Source_country),
         Source_country = ifelse(Source_country == "UK", 
                                 "United Kingdom",
                                 Source_country)) |>
  mutate(Languages = case_when(Languages == "eng" ~ "English",
                               Languages == "por" ~ "Portuguese",
                               Languages == "swe" ~ "Swedish",
                               Languages == "spa" ~ "Spanish",
                               Languages == "fre" ~ "French",
                               Languages == "est" ~ "Estonian"))

# Join the number of policy documents by country to the country centroids
country_centroids <- country_centroids |>
  left_join(policy_impact |>
              # Plot documents from the EU on Belgium
              mutate(Source_country = ifelse(Source_country == "EU", "Belgium", Source_country)) |>
              group_by(Source_country) |>
              summarize(n_documents = n()),
            by =  c("name" = "Source_country")) |>
  filter(!is.na(n_documents))

# Languages

policy_impact_languages <- policy_impact |> 
  group_by(Languages) |> 
  summarize(n_lang = n(), 
            .groups = "drop")

```

<!-- 
My analysis was done on September 17, 2024. At this time I am in the fourth place on the eight page of the search for McMaster researchers. Since each page is 25 researchers, this means I am in the top 25 * 7 + 4 = 179 most cited researchers. There are 10,000 researchers.

Non-health researchers in the database with more citations:

- John Burbridge (256: social sciences) (Emeritus)
- Lonnie Maggie (236: social sciences) (Emeritus)
- Frank T. Denton (222: Economy, Business, and Finance) (Emeritus)
- Michael R. Veall (222: Social Sciences) (Active)
- Thomas F. Crossley (196: Social Sciences) (No longer at McMaster)
- Chris M. Wood (215: environment) (No longer at McMaster)
- Magdalena Janus (213: education) (Active)
- A. Leslie Robb (184: Social Sciences) (Emeritus)
- Pavlos S. Kanaroglou (172: Economy, Business, and Finance) (Deceased)
- Arthur Sweetman (158: education) (Active)
- Antonio Paez (137: Economy, Business, and Finance)

Analysis updated on November 12, 2024. At this time I am in the 20th place on the eight page of the search for McMaster researchers. Since each page is 25 researchers, this means I am in the top 25 * 7 + 20 = 195 most cited researchers. There are 10,000 researchers.

Non-health researchers in the database with more citations:

- John Burbridge (280: social sciences) (Emeritus)
- Lonnie Maggie (261: social sciences) (Emeritus)
*-* Magdalena Janus (244: education) (Active)
*-* Michael R. Veall (230: Social Sciences) (Active)
- Frank T. Denton (227: Economy, Business, and Finance) (Emeritus)
- Thomas F. Crossley (206: Social Sciences) (No longer at McMaster)
- Chris M. Wood (199: environment) (No longer at McMaster)
- A. Leslie Robb (194: Social Sciences) (Emeritus)
- Dustin Garrick (175L environment) (Not at McMaster)
- Nidhi Nagabhatla (175: environment) (Not at McMaster)
*-* Arthur Sweetman (166: education) (Active)
- Pavlos S. Kanaroglou (166: Economy, Business, and Finance) (Deceased)
- Abigail Payne (154: education) (Not at McMaster)
- Evert Nieboer (152: Economic sector) (Emeritus - Biomedical Sciences)
*-* Eric Duku (149: Education) (Part-time, PBN)
*-* K. Bruce Newbold (148: social sciences)(Active)
*-* Antonio Paez (137: Economy, Business, and Finance)
-->

In addition to the scholarly impact of my research, my work has helped to inform policy. According to an analysis of policy impact using data from [Overton.io](https://www.overton.io)^[Analysis done on September 17, 2024], I am in the top `r round((25 * 7 + 20)/10000 * 100)`% of all researchers at McMaster in terms of citations in policy documents. When we consider active researchers in the social sciences, I am the fifth scholar at McMaster most cited scholar in policy documents, after Prof. Michael R. Veall (Dept. of Economics), Prof. Magdalena Janus (Faculty of Health Sciences), Prof. Arthur Sweet (Dept. of Economics), and Prof. Bruce Newbold (School of Earth, Environment and Society.

The impact of my research on policy is reflected in citations in multiple languages, including `r policy_impact_languages$Languages[1]`, `r policy_impact_languages$Languages[2]`, `r policy_impact_languages$Languages[3]`, `r policy_impact_languages$Languages[4]`, and `r policy_impact_languages$Languages[5]`. The international reach of this impact can be appreciated in Fig. \ref{fig:policy-impact-map}, where it can be seen the source countries of documents that cite my work. These countries include Canada, US, Mexico, Brazil, several European countries, Australia, and New Zealand. Besides governments at various levels in said countries, numerous International Government Organizations also refer to my work in their policy documents, including the European Union, OECD, the World Health Organization, the Pan American Health Organization, the World Bank, the Inter-American Development Bank, the International Transport Forum, and the Global Commission on the Economy and Climate. Think tanks that cite my research in policy documents include [IPEA](https://www.ipea.gov.br/forumbrics/en/) (Brazil), the [Lincoln Institute](https://www.lincolninst.edu) (US), [MOTU](https://www.motu.nz) (New Zealand), and [DIW](https://www.diw.de/en) (Germany).

```{r policy-impact-map, fig.cap="\\label{fig:policy-impact-map}Countries where policy documents reference my research"}
ggplot() +
  geom_sf(data = world) +
  geom_sf(data = country_centroids, 
          aes(size = n_documents)) +
  labs(caption = "Data source: Overton.io") +
  scale_size_continuous(range = c(1, 8)) +
  theme_void() +
  theme(legend.position = "none")
```

The distribution of citations in policy documents is more or less evenly distributed between governments and International Government Organizations (IGOs), and is also cited by think tanks, as seen in Fig. \ref{fig:policy-impact-sources}.

```{r policy-impact-plot, out.width="0.7\\linewidth", fig.cap="\\label{fig:policy-impact-sources}Policy sources that cite my research"}

policy_impact |> 
  group_by(`Source type`, 
           `Source title`) |> 
  summarize(n = n(),
            .groups = "drop") |>
  rename(Source_type = `Source type`, 
         Source_title = `Source title`) |>
  mutate(Source_type = case_when(Source_type == "government" ~ "Government",
                                 Source_type == "igo" ~ "IGO",
                                 Source_type == "think tank" ~ "Think Tank",
                                 Source_type == "other" ~ "Other")) |>
  drop_na() |>
  ggplot(aes(area = n, 
           fill = Source_type,
           subgroup = Source_type,
           label = Source_title)) +
  geom_treemap() +
  geom_treemap_subgroup_border() +
  geom_treemap_subgroup_text(place = "centre", grow = T, alpha = 0.25, 
                             colour =
                             "black", fontface = "italic", min.size = 0) +
  geom_treemap_text(colour = "white", place = "topleft", reflow = T) +
  scale_fill_manual(values = c("Government" = "chocolate2", "IGO" = "steelblue", "Think Tank" = "darkolivegreen3", "Other" = "darkgrey")) +
  labs(caption = "Data source: Overton.io") +
  theme(legend.position = "bottom")
```

Analysis of policy documents that cite my research identifies the main topics where my work has been influential. In Fig. \ref{fig:policy-impact-topics} we can see the wide-range of topics, from the economy and transportation, to air pollution and food security. The topics that my research is found more than expected relate to cyclying, bus and rapid transit, accessibility, and public transport.

```{r policy-impact-topics-plot, out.width="0.7\\linewidth", fig.cap="\\label{fig:policy-impact-topics}Policy topics informed by my research"}

policy_impact_topics |> 
  arrange(desc(Document_count)) |>
  slice_head(n = 30) |>
  ggplot(aes(area = Document_count, 
           fill = Reason_highlighted,
           subgroup = Reason_highlighted,
           label = Topic)) +
  geom_treemap() +
  geom_treemap_subgroup_border() +
  geom_treemap_subgroup_text(place = "centre", grow = T, alpha = 0.25, 
                             colour =
                             "black", fontface = "italic", min.size = 0) +
  geom_treemap_text(colour = "white", place = "topleft", reflow = T) +
  scale_fill_manual(name = "Frequency of topic",
                    values = c("seen frequently" = "steelblue", 
                               "seen more often than expected in this context" = "darkolivegreen3")) +
  labs(caption = "Data source: Overton.io") +
  theme(legend.position = "bottom")
```

# Publications

It is conventional in my fields of expertise to list authors in order of their contributions. The first and second authors are credited with doing a majority of the work. The exception to this general rule is when the last author is the senior author and has provided, in addition to other contributions, supervisory support to the rest of the team.

## Publications at a Glance

Table \ref{tab:bibliography-at-a-glance} provides some key information about my publication record. In addition to the items listed there, I am co-editor of `r bibliography_entries(paste0(here(),"/assets/edited-books.bib")) |> nrow()` edited books. Fig. \ref{fig:key-topics} maps the relationship between key topics in my peer-reviewed publications, based on keywords of the documents. Fig. \ref{fig:intl-colabs} maps my international research collaborations.

```{r}
kable(bibliography_glance,
      "latex",
      col.names = c("Type", 
                    "No. of Items",
                    "Mean No. Authors",
                    "Max. No. Authors", 
                    "Single Author", 
                    "First Author", 
                    "Second Author", 
                    "Senior Author", 
                    "Other Author"),
      booktabes = TRUE,
      caption = "\\label{tab:bibliography-at-a-glance}Bibliography at a glance") |>
  kable_styling(font_size = 7, 
                latex_options = c("HOLD_position", "scale_down"))
```

```{r convert-bibliography-for-bibliometric-analysis, include=FALSE}
# This chunk uses package {bibliometrix}

M <- convert2df(glue::glue(here::here(), "/assets/wos_0.bib"),
                dbsource = "wos",
                format = "bibtex")
```

```{r key-word-co-occurrences, include=FALSE}
# This chunk uses package {bibliometrix}

NetMatrix <- biblioNetwork(M, 
                           analysis = "co-occurrences", 
                           network = "keywords", 
                           sep = ";")

net <- networkPlot(NetMatrix, 
                   normalize="association", 
                   weighted = T, 
                   n = 35, 
                   Title = "Keyword Co-occurrences", 
                   type = "fruchterman", 
                   size = TRUE,
                   edgesize = 5,
                   labelsize=0.5)

graph <- as_tbl_graph(net$graph)
```

```{r key-research-themes}
set.seed(35)

key_research_themes <- ggraph(graph |>
                                filter(!str_detect(name, "hamilton")) |>
                                mutate(name = str_to_title(name)),
                              layout = "fr") +
  geom_edge_fan(aes(alpha = weight)) +
  geom_node_label(aes(color = factor(community),
                      label = name,
                      size = size),
                  repel = TRUE) +
  scale_size_continuous(range = c(2.5, 4.5)) +
  theme_void() +
  theme(legend.position = "none")
```

```{r network-of-collaborations, include=FALSE}
# This chunk uses package {bibliometrix}

M <- metaTagExtraction(M, Field = "AU_CO", sep = ";")

NetMatrix <- biblioNetwork(M, 
                           analysis = "collaboration", 
                           network = "countries", sep = ";")

net <- networkPlot(NetMatrix, 
                   n = dim(NetMatrix)[1], 
                   label.cex = TRUE,
                   Title = "Country Collaboration", 
                   type = "circle", size=TRUE, 
                   remove.multiple=FALSE,
                   labelsize=0.7,
                   cluster="none")

graph <- as_tbl_graph(net$graph)
```

```{r plot-network-of-collaborations}
intl_collabs <- ggraph(graph  |>
                         mutate(name = str_to_title(name),
                                name = ifelse(name == "Usa", "USA", name)), 
                       layout = "linear", 
                       circular = TRUE) +
  geom_edge_fan(aes(alpha = weight)) +
  geom_node_label(aes(label = name,
                      size = size)) +
  scale_size_continuous(range = c(2.5, 4.5)) +
  theme_void() +
  theme(legend.position = "none")
```

```{r key-topics-plot, out.width="0.7\\linewidth", fig.cap="\\label{fig:key-topics}Key topics in my peer-reviewed publications"}
key_research_themes
```

```{r intl-colabs-plot, out.width="0.6\\linewidth", fig.cap="\\label{fig:intl-colabs}International collaborations"}
intl_collabs
```

\newpage

# Lifetime Publications

## Books

```{r books}
bibliography_entries(paste0(here(),"/assets/books.bib")) |>
  arrange(desc(issued), desc(author$family))
```

## Edited Books

```{r edited-books}
bibliography_entries(paste0(here(),"/assets/edited-books.bib")) |>
  #bibliography_entries(paste0(here(),"/assets/savedrecs_2.bib")) |>
  arrange(desc(issued), desc(author$family))
```

## Book Chapters

```{r book-chapters}
bibliography_entries(paste0(here(),"/assets/book-chapters.bib")) |>
  #bibliography_entries(paste0(here(),"/assets/savedrecs_2.bib")) |>
  arrange(desc(issued), desc(author$family))
```


## Reports 

```{r reports}
bibliography_entries(paste0(here(),"/assets/reports.bib")) |>
  #bibliography_entries(paste0(here(),"/assets/savedrecs_2.bib")) |>
  arrange(desc(issued), desc(author$family))
```

<!--
\newpage
-->

## Peer-Reviewed Journal Articles (Published)

```{r journal-articles-published}
bibliography_entries(paste0(here(),"/assets/refereed-publications.bib")) |>
  arrange(desc(issued), desc(author$family))
```

## Peer-Reviewed Journal Articles (Accepted for Publication in Final Form)

```{r journal-articles-accepted-for-publication}
rpa <- bibliography_entries(paste0(here(),"/assets/refereed-publications-accepted.bib"))

# Check that the table is not empty
if(nrow(rpa) > 0){
  rpa |>
    arrange(desc(issued), desc(author$family))
}
```

<!--
\newpage
-->

## Peer-Reviewed Journal Articles (Submitted for Publication)

```{r journal-articles-submitted-for-publication}
rsp <- bibliography_entries(paste0(here(),"/assets/refereed-publications-submitted.bib")) 

# Check that the table is not empty
if(nrow(rsp) > 0){
  rsp |>
    arrange(desc(issued), desc(author$family))
}
```

<!--
\newpage
-->

## Work in Progress

```{r work-in-progress}
bibliography_entries(paste0(here(),"/assets/work-in-progress.bib")) |>
  arrange(desc(issued), desc(author$family))
```

## Peer-reviewed Conference Presentations

```{r peer-reviewed-conference-presentations}
peer_reviewed_conference <- bibliography_entries(paste0(here(),"/assets/conference-presentations-peer-reviewed.bib")) |>
  arrange(desc(issued), desc(author$family))

peer_reviewed_conference
```

<!--Number of lifetime peer-reviewed conference presentations is `r nrow(peer_reviewed_conference)`.-->

## Non-peer-reviewed Conference Presentations

```{r not-peer-reviewed-conference-presentations, include=FALSE}
non_peer_reviewed_conference <- bibliography_entries(paste0(here(),"/assets/conference-presentations-not-peer-reviewed.bib")) |>
  arrange(desc(issued), desc(author$family))
```

Number of lifetime non-peer-reviewed conference presentations is `r nrow(non_peer_reviewed_conference)`.

# Knowledge Mobilization Activities

```{r unsolicited-advice-details}
read_csv(paste0(here(),"/assets/talks.csv")) |>
  filter(What == "Workshop" ) |>
  detailed_entries(what = Organization, 
                   when = Year, 
                   with = Title,
                   where = Where,
                   why = paste0(What, ", ", Role),
                   .protect = FALSE)
```

# Invited Talks, Seminars, and Panels

```{r talks-courses-details}
talks <- read_csv(paste0(here(),"/assets/talks.csv")) |>
  filter(What != "Workshop") |>
  detailed_entries(what = Organization, 
                   when = Year, 
                   with = Title,
                   where = Where,
                   why = paste0(What, ", ", Role),
                   .protect = FALSE)
```

## Lifetime Talks, Seminars, and Panels

My lifetime number of talks is `r nrow(talks)`.

## Details

```{r}
talks
```

# Training of Highly Qualified Personnel

## Supervision at a Glance

```{r supervisorhip}
supervision <- read_csv(paste0(here(),"/assets/supervision.csv")) 
```

```{r supervision-at-a-glance}
supervision |>
  filter(is.na(With), Status != "Withdrew from Program") |>
  group_by(Level, Program) |>
  summarize(Supervision = n(),
            .groups = "drop") |>
  full_join(supervision |>
              filter(!is.na(With), Status != "Withdrew from Program") |>
              group_by(Level, Program) |>
              summarize(Cosupervision = n(),
                        .groups = "drop"),
            by = c("Level", "Program")) |>
  full_join(supervision |>
              filter(Status == "Withdrew from Program") |>
              group_by(Level, Program) |>
              summarize(Withdrew = n(),
                        .groups = "drop"),
            by = c("Level", "Program")) |>
  arrange(Level) |>
  mutate(Supervision = as.character(Supervision),
         Cosupervision = as.character(Cosupervision),
         Withdrew = as.character(Withdrew)) |>
  replace_na(list(Supervision = "-",
                  Cosupervision = "-",
                  Withdrew = "-")) |>
  gt() |>
  cols_label(Supervision = "Sole Supervisor",
             Cosupervision = "Co-supervisor",
             Withdrew = "Withdrawn from Program") |>
    as_latex()
```


## Undergraduate Supervision

```{r supervisorship-undergraduate}
supervision |>
  filter(Level == "Undergraduate") |>
  arrange(Program, desc(Year)) |>
  detailed_entries(what = ifelse(!is.na(With), glue::glue("Co-supervised with {With}"), ""), 
                   with = glue::glue("{Name} ({Institution}, {Country})"),
                   where = case_when(Status == "Complete" ~ as.character(Year),
                                     Status == "In Progress" ~ "In Progress",
                                     Status == "Withdrew from Program" ~ "Withdrew from Program"),
                   when = Program,
                   .protect = FALSE)
```

## Master's Supervision

```{r supervisorship-masters}
supervision |>
  filter(Level == "Master") |>
  arrange(desc(Year)) |>
  detailed_entries(what = ifelse(!is.na(With), glue::glue("Co-supervised with {With}"), ""),
                   with = glue::glue("{Name} ({Institution}, {Country})"),
                   where = case_when(Status == "Complete" ~ as.character(Year),
                                     Status == "In Progress" ~ "In Progress",
                                     Status == "Withdrew from Program" ~ "Withdrew from Program"),
                   when = Program,
                   .protect = FALSE)
```

## Doctoral Supervision

```{r supervisorship-doctoral}
supervision |>
  filter(Level == "Doctoral") |>
  arrange(desc(Year)) |>
  detailed_entries(what = ifelse(!is.na(With), glue::glue("Co-supervised with {With}"), ""), 
                   with = glue::glue("{Name} ({Institution}, {Country})"),
                   where = case_when(Status == "Complete" ~ as.character(Year),
                                     Status == "In Progress" ~ "In Progress",
                                     Status == "Withdrew from Program" ~ "Withdrew from Program"),
                   when = Program,
                   .protect = FALSE)
```


